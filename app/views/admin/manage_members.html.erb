<h1>Manage Members</h1>
<p>You can manage members here.</p>

<h2>New Users</h2>
<% if @new_users.length > 0 %>
  <table>
    <th>Name</th>
    <th>Email</th>
    <th>Actions</th>
    <tbody>
      <% @new_users.each do |user| %>
        <tr id=<%= "new_user_row_#{user.id}" %>>
          <td><%= user.full_name %></td>
          <td><%= user.email %></td>
          <td>
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Manage
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <%# option to give user member status %>
                <li><%= link_to "Make Member", "/make_user_member/#{user.id}", class: "dropdown-item" %></li>
                <%# option to give user alumni status %>
                <li><%= link_to "Make Alumni", "/make_user_alumni/#{user.id}", class: "dropdown-item" %></li>
                <%# option to give user admin status %>
                <li><%= link_to "Make Admin", "/make_user_admin/#{user.id}", class: "dropdown-item" %></li>
                <%# option to delete user %>
                <li><%= link_to "Delete User", "/delete_user/#{user.id}", class: "dropdown-item" %></li>
              </ul>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No new users.</p>
<% end %>

<h2>Members</h2>
<% if @members.length > 0 %>
  <table>
    <thead>
      <th>Name</th>
      <th>Email</th>
      <th>Points</th>
      <th>Member Status</th>
      <th>Actions</th>
    </thead>
    <tbody>
      <% @members.each do |user| %>
        <tr id=<%= "member_row_#{user.id}" %>>
          <td><%= user.full_name %></td>
          <td><%= user.email %></td>
          <td><%= user.information.points %></td>
          <td><%= get_user_status(user) %>
          <td>
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Manage
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <% if !user.admin %>
                  <%# option to give user admin status %>
                  <li><%= link_to "Make Admin", "/make_user_admin/#{user.id}", class: "dropdown-item" %></li>
                <% else %>
                  <%# option to give user member status %>
                  <li><%= link_to "Remove Admin Status", "/make_user_member/#{user.id}", class: "dropdown-item" %></li>
                <% end %>
                <% if !user.member %>
                  <%# option to give user member status %>
                  <li><%= link_to "Make Member", "/make_user_member/#{user.id}", class: "dropdown-item" %></li>
                <% end %>
                <% if !user.alumni %>
                  <%# option to give user alumni status %>
                  <li><%= link_to "Make Alumni", "/make_user_alumni/#{user.id}", class: "dropdown-item" %></li>
                <% else %>
                  <%# option to give user member status %>
                  <li><%= link_to "Remove Alumni Status", "/make_user_member/#{user.id}", class: "dropdown-item" %></li>
                <% end %>
                <%# option to take away user's member status %>
                <li><%= link_to "Remove Member Status", "/remove_user_member/#{user.id}", class: "dropdown-item" %></li>
              </ul>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No members.</p>
<% end %>

<h2>Alumni</h2>
<% if @alumni.length > 0 %>
  <table>
    <thead>
      <th>Name</th>
      <th>Email</th>
      <th>Points</th>
      <th>Member Status</th>
      <th>Actions</th>
    </thead>
    <tbody>
      <% @alumni.each do |user| %>
        <tr id=<%= "member_row_#{user.id}" %>>
          <td><%= user.full_name %></td>
          <td><%= user.email %></td>
          <td><%= user.information.points %></td>
          <td><%= get_user_status(user) %>
          <td>
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Manage
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <% if !user.admin %>
                  <%# option to give user admin status %>
                  <li><%= link_to "Make Admin", "/make_user_admin/#{user.id}", class: "dropdown-item" %></li>
                <% else %>
                  <%# option to give user member status %>
                  <li><%= link_to "Remove Admin Status", "/make_user_member/#{user.id}", class: "dropdown-item" %></li>
                <% end %>
                <% if !user.member %>
                  <%# option to give user member status %>
                  <li><%= link_to "Make Member", "/make_user_member/#{user.id}", class: "dropdown-item" %></li>
                <% end %>
                <% if !user.alumni %>
                  <%# option to give user alumni status %>
                  <li><%= link_to "Make Alumni", "/make_user_alumni/#{user.id}", class: "dropdown-item" %></li>
                <% else %>
                  <%# option to give user member status %>
                  <li><%= link_to "Remove Alumni Status", "/make_user_member/#{user.id}", class: "dropdown-item" %></li>
                <% end %>
                <%# option to take away user's member status %>
                <li><%= link_to "Remove Member Status", "/remove_user_member/#{user.id}", class: "dropdown-item" %></li>
              </ul>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No alumni.</p>
<% end %>